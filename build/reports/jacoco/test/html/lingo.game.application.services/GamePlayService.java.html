<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GamePlayService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">game</a> &gt; <a href="index.source.html" class="el_package">lingo.game.application.services</a> &gt; <span class="el_source">GamePlayService.java</span></div><h1>GamePlayService.java</h1><pre class="source lang-java linenums">package lingo.game.application.services;

import lingo.game.application.gameplay.IWordValidator;
import lingo.game.application.gameplay.WordValidator;
import lingo.game.domain.model.Game;
import lingo.game.domain.model.Round;
import lingo.game.domain.model.Word;
import lingo.game.domain.services.IGameService;
import lingo.game.domain.services.IRoundService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;

import java.io.IOException;
import java.net.URISyntaxException;
@Component
public class GamePlayService implements IGamePlayService {
    @Autowired
    IGameService gameService;
    @Autowired
    IRoundService roundService;
    @Autowired TurnService turnService;
    @Autowired
    WordSourceService wordSourceService;
<span class="fc" id="L25">    public GamePlayService(){</span>

<span class="fc" id="L27">    }</span>

    public boolean startWithRandomWord() throws IOException, URISyntaxException {
<span class="fc" id="L30">        return start(wordSourceService.generateNewWord());</span>
    }

    public boolean start(Word word) throws IOException, URISyntaxException {
<span class="fc" id="L34">        Round round = roundService.createRound(10, 5, word);</span>
<span class="fc" id="L35">        gameService.start(round);</span>
<span class="fc" id="L36">        return true;</span>
    }

    public void printCurrentGame(){
<span class="fc" id="L40">        System.out.println(&quot;Score:&quot; + gameService.getGame().getScore());</span>
<span class="fc" id="L41">        int roundSize = gameService.getGame().getRounds().size();</span>
<span class="fc" id="L42">        System.out.println(&quot;Round:&quot; + roundSize);</span>
<span class="fc" id="L43">        System.out.println(&quot;Turns left:&quot; + gameService.getGame().getCurrentRound().getTurn() +  &quot;/5&quot;);</span>
<span class="fc" id="L44">        System.out.println(&quot;Time left:&quot;  + gameService.getGame().getCurrentRound().getTimer());</span>
<span class="fc" id="L45">        System.out.println(&quot;To guess word:&quot; + gameService.getGame().getCurrentRound().getWord());</span>
<span class="fc" id="L46">        System.out.println(&quot;Game word parts with placehodler:&quot; + gameService.getGame().getCurrentRound().getWordPartWithPlaceholder());</span>
<span class="fc" id="L47">        System.out.println(&quot;Game word parts:&quot; + gameService.getGame().getCurrentRound().getWordParts());</span>
<span class="fc" id="L48">    }</span>

    // vanuit round kun je meer showen dus ook feedback
    public Round guessWord(String playersWord) throws IOException, URISyntaxException {
<span class="fc" id="L52">        IWordValidator wordValidator = new WordValidator();</span>
<span class="fc" id="L53">        int roundSize = gameService.getGame().getRounds().size();</span>
<span class="fc" id="L54">        Round currentRound =gameService.getGame().getCurrentRound();</span>
<span class="fc" id="L55">        boolean wordCorrect = false;</span>
<span class="fc" id="L56">        currentRound = turnService.evaluateGuessedWord(currentRound, playersWord);</span>
<span class="fc" id="L57">        wordCorrect = currentRound.getFeedback().isWordValidState();</span>

<span class="fc" id="L59">        checkRoundState(wordCorrect);</span>
<span class="fc" id="L60">        return currentRound;</span>
    }

    private void checkRoundState(boolean wordCorrect) throws IOException, URISyntaxException {
<span class="fc" id="L64">        int turn = gameService.getGame().getCurrentRound().getTurn();</span>
<span class="fc bfc" id="L65" title="All 2 branches covered.">        if(wordCorrect == true){</span>
<span class="fc" id="L66">            Round round = roundService.createRound( 10, 5, wordSourceService.generateNewWord());</span>
<span class="fc" id="L67">            gameService.getGame().addScore(turn);</span>
<span class="fc" id="L68">            Game game = gameService.nextRound(round);</span>
<span class="fc" id="L69">        } else {</span>
<span class="fc bfc" id="L70" title="All 2 branches covered.">            if(turn == 5){</span>
<span class="fc" id="L71">                start(wordSourceService.generateNewWord());</span>
            } else {
<span class="fc" id="L73">                gameService.getGame().getCurrentRound().nextTurn();</span>
            }

        }
        //printCurrentGame();
<span class="fc" id="L78">    }</span>

/*    public Round evaluateGuessedWord(Round round, String guessWord){
        Word word = round.getWord();
        IFeedbackCreator feedbackCreator = new TurnFeedback();
        Feedback feedback = feedbackCreator.evolveWord(word, round.getWordParts(), guessWord);
        round.setFeedback(feedback);
        return round;
        //  return round.getWord().equals(guessWord);
    }*/

    public void PrintHighscore(){

<span class="nc" id="L91">    }</span>

    public void Printscore(){

<span class="nc" id="L95">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>